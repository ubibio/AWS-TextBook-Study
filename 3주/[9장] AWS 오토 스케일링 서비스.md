# 9장. AWS 오토 스케일링 서비스

## 9.1. 스케일링

### 9.1.1. 스케일링이란
- 스케일링(scaling): IT 자원을 확장하거나 축소하는 기능

### 9.1.2. 스케일링의 종류
- 수직 스케일링(vertical scaling): IT 자원의 용량을 확장하거나 축소하는 기능  
  - 스케일 업(scale-up): IT 자원 용량 확장  
  - 스케일 다운(scale-down): IT 자원 용량 축소  
- 수평 스케일링(horizontal scaling): IT 자원의 수량을 확장하거나 축소하는 기능  
  - 스케일 아웃(scale-out): IT 자원 수량 증가  
  - 스케일 인(scale-in): IT 자원 수량 감소  

## 9.2. AWS 오토 스케일링 서비스

### 9.2.1. Amazon EC2 오토 스케일링이란
- 동적으로 EC2 인스턴스 수를 확장하거나 축소하여 워크로드를 유지하는 서비스

### 9.2.2. AWS EC2 오토 스케일링 구성 요소
- 그룹: EC2 인스턴스를 논리적으로 구분  
- 가용 영역, 서브넷  
- 최소/최대 인스턴스 수량  
- 최초 인스턴스 수량  
- 로드 밸런서  
- 모니터링 지표  
- 헬스체크  
- 구성 템플릿: EC2 인스턴스 구성 템플릿  
  - AMI  
  - 인스턴스 유형  
  - 키 페어  
  - 사용자 데이터  
  - 보안 그룹  
  - IAM 역할  
- 조정 옵션: 오토 스케일링 그룹 조정 방법  
  - 예약 작업 또는 조정 정책  

### 9.2.3. Amazon EC2 오토 스케일링의 인스턴스 수명 주기
- 수명 주기 흐름  
  1. 오토 스케일링 그룹  
  2. (스케일 아웃)  
  3. 대기 중  
  4. 실행 중  
  5. (헬스체크 실패, 스케일 인)  
  6. 종료 중  
  7. 종료됨  
- 추가 흐름  
  - 실행 중 → (중지) → 중지 중 → 중지됨 → (시작) → 대기 중 → …  
  - 실행 중 → (중지) → 중지 중 → 중지됨 → 종료 → 종료 중 → 종료됨  
- 인스턴스 확장에 따른 이벤트  
  - 그룹의 크기를 수동으로 늘리는 경우  
  - 지정된 수요 증가에 따라 조정 정책을 사용하는 경우  
  - 특정 시간에 예약된 작업 수행하는 경우  
  - 대기 중 → 수명 주기 실행 → (로드 밸런서 연결) → 실행 중  
- 인스턴스 축소에 따른 이벤트  
  - 그룹의 크기를 수동으로 줄이는 경우  
  - 지정된 수요 감소에 따라 조정 정책을 사용하는 경우  
  - 특정 시간에 예약된 작업 수행하는 경우  
  - 종료 중 → (드레이닝) → (로드 밸런서 연결 해제) → 수명 주기 실행 → 종료됨  
- 드레이닝(draining): 인스턴스 종료 중 사용자 요청을 처리하기 위해 기다리는 상태

### 9.2.4. Amazon EC2 오토 스케일링 조정 옵션
- 인스턴스를 일정한 수로 유지  
  - 일정 주기로 체크 → 비정상 상태의 인스턴스를 종료하고 새로운 인스턴스 시작하여 수 유지  
- 수동 조정  
  - 기본 옵션. 오토 스케일링 그룹의 최대, 최소 용량을 수동 조정  
- 동적 조정  
  - 대상 추적 조정: 특정 지표의 목표 값을 유지하기 위해 오토 스케일링 적용  
  - 단계 조정: 오토 스케일링 그룹의 용량을 임계값에 따라 단계적으로 조정  
  - 단순 조정: 오토 스케일링 그룹의 용량을 임계값과 무관하게 단일하게 조정  
- 일정을 기반으로 예약된 조정  
  - 인스턴스의 증가, 감소 수량을 정확히 아는 경우  
- 일정을 기반으로 예측 조정  
  - 누적된 기록을 이용하여 트래픽을 예측하여 조정  

### 9.2.5. Amazon EC2 오토 스케일링 요금
- EC2 인스턴스, CloudWatch 경보 요금만 발생  
- 오토 스케일링 자체 요금 없음  
